(function(){var t,n,r,e,i,o,h,u,a,c,f,l,s,v,g,d,m,w;$("#hide-content").on("click touch",function(){return"visible"===$(".container").css("visibility")?$(".container").css("visibility","hidden"):$(".container").css("visibility","visible")}),$(".container").css("height",$(document).height()),h=function(t,n,r,e,i){var h,u,a,c,f,l,s;for(f=[],l=a=0,c=t.length;a<c;l=++a)u=t[l],f.push(function(){var t,a,c;for(c=[],s=t=0,a=u.length;t<a;s=++t)(h=u[s])?(o.fillStyle=1===h?e:i,c.push(o.fillRect(l*n+1,s*r+1,n-2,r-2))):c.push(o.clearRect(l*n+1,s*r+1,n-2,r-2));return c}());return f},w=function(t){var n,r,e,i,o,h,u,c,f,s,v,g;for(c=l(0,t.length,t[0].length),v=i=0,h=t.length;i<h;v=++i)for(g=o=0,u=(e=t[v]).length;o<u;g=++o)r=e[g],s=(f=a(t,v,g))[0],n=f[1],!r&&s>0&&s<4&&(0===v||v===t.length-1||0===g||g===t[0].length-1||n?c[v][g]=-1:c[v][g]=1);return c},a=function(t,n,r){var e,i,o,h,u,a,l,s;for(a=0,e=!1,l=i=-1;i<=1;l=++i)for(s=o=-1;o<=1;s=++o)0===l&&0===s||(u=r+s,(h=n+l)>=0&&h<f&&u>=0&&u<c&&(1===t[h][u]?a++:-1===t[h][u]&&(e=!0)));return[a,e]},l=function(t,n,r){var e,i;return function(){var o,h,u;for(u=[],e=o=1,h=n;1<=h?o<=h:o>=h;e=1<=h?++o:--o)u.push(function(){var n,e,o;for(o=[],i=n=1,e=r;1<=e?n<=e:n>=e;i=1<=e?++n:--n)o.push(t);return o}());return u}()},s=function(t){var n,r,e;for(n=[];;){if(r=Math.floor(Math.random()*t.length),e=Math.floor(Math.random()*t[0].length),!t[r][e]){t[r][e]=1;break}n.push(void 0)}return n},i=function(){return t.width=$(document).width(),t.height=$(document).height(),[Math.floor(t.width/d),Math.floor(t.height/g)]},u=function(n,r,e,i,h){var u,a,c,f,l,s,v;for(o.strokeStyle=n,s=u=0,c=r-1;0<=c?u<=c:u>=c;s=0<=c?++u:--u)o.beginPath(),o.moveTo(s*i,0),o.lineTo(s*i,t.height),o.stroke();for(l=[],v=a=0,f=e-1;0<=f?a<=f:a>=f;v=0<=f?++a:--a)o.beginPath(),o.moveTo(0,v*h),o.lineTo(t.width,v*h),l.push(o.stroke());return l},t=$("canvas")[0],o=t.getContext("2d"),d=20,g=20,v=i(),f=v[0],c=v[1],u("#E5E5E5",f,c,d,g),e=l(0,f,c),s(e),h(e,d,g,"#A6C0C5","#F5968C"),r=0,n=0,$(window).resize(function(){var t;return t=i(),f=t[0],c=t[1],u("#E5E5E5",f,c,d,g),e=l(0,f,c)}),m=function(t){return t-r>100&&(r=t,e=w(e),h(e,d,g,"#A6C0C5","#F5968C")),t-n>1e3&&(n=t,s(e)),window.requestAnimationFrame(m)},window.requestAnimationFrame(m)}).call(this);